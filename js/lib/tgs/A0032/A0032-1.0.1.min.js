/* Copyright (c) 2013 TreSensa, Inc. All Rights Reserved. */
TGS.Adapters.A0032=function(){TGS.Adapters.A0032.superclass.constructor.call(this),TGS.DataStore._sSaveToLocalStorage=!0,TGS.DataStore._sSaveToTGSServer=!1,TGS._sContinueOnPartnerInfoFail=!0},TGS.Adapters.A0032.prototype={supportsMicrotransactions:function(){return!0},costFactor:function(){return 10},priceAsFormattedString:function(a){return"$"+(a*this.costFactor()/100-.01).toFixed(2)},currencyIcon:function(){return TGS._IMAGES_LOCATION+"testicon.png"},gameWasLaunched:function(){"undefined"!=typeof window.TGE&&TGE.Game.GetInstance()&&(TGE.Button.DefaultVerticalPressOffset=3)},connect:function(){this.getLoginStatus()},loginUser:function(a){TGS.Debug.Log(TGS.Debug.LOG_INFO,"prompting user to login...");var b=window.prompt("LOGIN (enter your username):","");return b?"string"!=typeof b||b.length<1?(TGS._LoginFailed(a),void 0):(this._mUsername=b,this.userLoggedIn(a,b),void 0):(TGS._LoginCanceled(a),void 0)},purchaseItem:function(a){a.internalErrorMessage="IAP not implemented",a.userErrorMessage="In-app purchases are not currently supported. Feature is coming soon, please check back again.",TGS.Microtransactions._PartnerPurchaseFailed(a)},openPurchase:function(a){var b="Do you agree to pay "+this.priceAsFormattedString(a.item.price)+" to buy "+a.item.title+"?",c=confirm(b);setTimeout(this.closePurchase.bind(this,c,a),1e3)},closePurchase:function(a,b){a?(TGS.Debug.Log(TGS.Debug.LOG_INFO,"TizenAdapter approved purchase of transaction "+b.transactionID),TGS.Microtransactions._PartnerPurchaseSuccessful(b)):(b.internalErrorMessage="user cancelled",b.userErrorMessage="",TGS.Microtransactions._PartnerPurchaseFailed(b))},initialize:function(){document.addEventListener("tizenhwkey",function(a){"back"===a.keyName?tizen.application.getCurrentApplication().exit():"menu"===a.keyName}),this._mIsReady=!0,null!==this.onAdapterReady&&this.onAdapterReady.call(),TGS.Debug.Log(TGS.Debug.LOG_INFO,"Tizen adapter initialized.")}},extend(TGS.Adapters.A0032,TGS.PartnerBridge);