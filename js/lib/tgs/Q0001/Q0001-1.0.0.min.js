/* Copyright (c) 2013 TreSensa, Inc. All Rights Reserved. */
TGS.Adapters.Q0001=function(){TGS.Adapters.Q0001.superclass.constructor.call(this),this._mLoggedIn=!0,this._mMoreGamesURL=null,TGS.DataStore._sSaveToLocalStorage=!1,TGS.DataStore._sSaveToTGSServer=!1},TGS.Adapters.Q0001.prototype={supportsMicrotransactions:function(){return!1},autoLogin:function(){return!0},costFactor:function(){return 10},priceAsFormattedString:function(a){return"$"+(a*this.costFactor()/100-.01).toFixed(2)},currencyIcon:function(){return TGS._IMAGES_LOCATION+"testicon.png"},connect:function(){this.getLoginStatus()},loginUser:function(a){TGS.Debug.Log(TGS.Debug.LOG_INFO,"prompting user to login...");var b=window.prompt("LOGIN (enter your username):","");return b?"string"!=typeof b||b.length<1?(TGS._LoginFailed(a),void 0):(this._mUsername=b,this.userLoggedIn(a,b),void 0):(TGS._LoginCanceled(a),void 0)},purchaseItem:function(a){a.partnerTransactionID=~~(2147483648*Math.random()),setTimeout(this.openPurchase.bind(this,a),2e3)},openPurchase:function(a){var b="Do you agree to pay "+this.priceAsFormattedString(a.item.price)+" to buy "+a.item.title+"?",c=confirm(b);setTimeout(this.closePurchase.bind(this,c,a),1e3)},closePurchase:function(a,b){a?window.GameConfig&&GameConfig.PROD_ENV===!0?(b.internalErrorMessage="PROD_ENV=true",b.userErrorMessage="IAP purchases are not allowed in production.",TGS.Microtransactions._PartnerPurchaseFailed(b)):(TGS.Debug.Log(TGS.Debug.LOG_INFO,"TestAdapter approved purchase of transaction "+b.transactionID),TGS.Microtransactions._PartnerPurchaseSuccessful(b)):(b.internalErrorMessage="user cancelled",b.userErrorMessage="",TGS.Microtransactions._PartnerPurchaseFailed(b))}},extend(TGS.Adapters.Q0001,TGS.PartnerBridge);